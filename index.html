<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0"><title>NeonForge 3D Ultimate</title><style>:root{--bg:#02030a;--panel:rgba(4,6,14,0.95);--text:#e8f4ff;--muted:#7a92c4;--accent:#00d4ff;--good:#20ff20;--warn:#ffaa20;--bad:#ff4040;--border:rgba(0,212,255,0.15);--glow:rgba(0,212,255,0.3)}*{box-sizing:border-box;margin:0;padding:0}html,body{height:100%;background:var(--bg);color:var(--text);font-family:Consolas,Monaco,monospace;overflow:hidden}canvas{position:fixed;top:0;left:0;width:100vw;height:100vh;display:block}#mainUI{position:fixed;top:10px;left:10px;width:460px;max-height:calc(100vh-20px);background:var(--panel);border:1px solid var(--border);border-radius:12px;padding:12px;font-size:11px;overflow-y:auto;z-index:100;backdrop-filter:blur(10px);box-shadow:0 0 30px rgba(0,212,255,0.2)}#tabs{display:flex;gap:4px;margin-bottom:8px;flex-wrap:wrap}#tabs button{background:linear-gradient(135deg,#001122,#002244);border:1px solid var(--border);color:var(--text);padding:6px 10px;border-radius:6px;cursor:pointer;font-size:10px;transition:all 0.2s;min-width:60px}#tabs button:hover{background:linear-gradient(135deg,#002244,#003366);box-shadow:0 0 10px var(--glow);transform:translateY(-1px)}#tabs button.active{background:linear-gradient(135deg,var(--accent),#40ffff);color:#000;box-shadow:0 0 15px var(--glow)}input[type="range"]{width:100%;height:4px;background:rgba(255,255,255,0.1);border-radius:2px;outline:none;margin:4px 0;appearance:none}input[type="range"]::-webkit-slider-thumb{appearance:none;width:12px;height:12px;background:var(--accent);border-radius:50%;cursor:pointer;box-shadow:0 0 8px var(--glow)}input[type="range"]::-moz-range-thumb{width:12px;height:12px;background:var(--accent);border-radius:50%;cursor:pointer;border:none;box-shadow:0 0 8px var(--glow)}input[type="number"]{width:100%;background:linear-gradient(135deg,#001122,#002244);border:1px solid var(--border);color:var(--text);padding:4px 6px;border-radius:4px;font-size:10px}bu
tton{background:linear-gradient(135deg,#001122,#002244);border:1px solid var(--border);color:var(--text);padding:6px 10px;border-radius:6px;cursor:pointer;font-size:10px;transition:all 0.2s}button:hover{background:linear-gradient(135deg,#002244,#003366);box-shadow:0 0 10px var(--glow);transform:translateY(-1px)}button:active{transform:scale(0.98) translateY(0)}button.danger{background:linear-gradient(135deg,#440011,#660022);border-color:rgba(255,64,64,0.3)}button.danger:hover{background:linear-gradient(135deg,#660022,#880033);box-shadow:0 0 10px rgba(255,64,64,0.3)}select{background:linear-gradient(135deg,#001122,#002244);border:1px solid var(--border);color:var(--text);padding:4px;border-radius:4px;font-size:10px;width:100%}label{display:block;color:var(--muted);margin-top:6px;font-size:10px;font-weight:600}pre{background:rgba(0,10,20,0.8);padding:6px;border-radius:6px;font-size:9px;max-height:120px;overflow:auto;margin:4px 0;border:1px solid rgba(0,212,255,0.1);font-family:Consolas,Monaco,monospace}#footer{position:fixed;bottom:10px;right:10px;background:var(--panel);padding:8px 12px;border-radius:8px;border:1px solid var(--border);font-size:10px;backdrop-filter:blur(10px);box-shadow:0 0 20px rgba(0,212,255,0.15)}#crosshair{position:fixed;top:50%;left:50%;width:20px;height:20px;transform:translate(-50%,-50%);pointer-events:none;z-index:50;display:none}#crosshair::before{content:'';position:absolute;top:9px;left:0;width:20px;height:2px;background:var(--accent);box-shadow:0 0 5px var(--glow)}#crosshair::after{content:'';position:absolute;top:0;left:9px;width:2px;height:20px;background:var(--accent);box-shadow:0 0 5px var(--glow)}#physicsViz{position:fixed;top:10px;right:10px;width:220px;height:170px;background:rgba(0,10,20,0.9);border:1px solid var(--border);border-radius:8px;padding:8px;font-size:9px;display:none;backdrop-filter:blur(5px)}#slingshot{position:fixed;bottom:50px;left:50px;width:120px;height:120px;background:rgba(0,212,255,0.1);border:3px solid var(--accent);border-radius:50%;display:none;cursor:cro
sshair;animation:neonPulse 2s infinite}#minimap{position:fixed;top:10px;right:240px;width:180px;height:180px;background:rgba(0,10,20,0.9);border:1px solid var(--border);border-radius:8px;display:none}#performanceGraph{position:fixed;bottom:10px;left:10px;width:320px;height:120px;background:rgba(0,10,20,0.9);border:1px solid var(--border);border-radius:8px;display:none}#trajectoryCanvas{border:1px solid var(--border);background:rgba(0,10,20,0.5);border-radius:4px}#benchProgress{height:80px;background:rgba(0,10,20,0.8);border:1px solid var(--border);border-radius:4px;margin:4px 0;overflow:hidden;position:relative}#benchProgress::before{content:'';position:absolute;top:0;left:0;width:100%;height:1px;background:linear-gradient(90deg,transparent,var(--accent),transparent);animation:dataFlow 3s infinite linear}#gamesList{max-height:240px;overflow-y:auto}#gamesList .game-item{display:flex;justify-content:space-between;align-items:center;padding:4px 6px;margin:2px 0;background:rgba(0,10,20,0.3);border-radius:4px;border-left:3px solid transparent}#gamesList .game-item.ultra{border-left-color:#00ff00}#gamesList .game-item.high{border-left-color:var(--good)}#gamesList .game-item.medium{border-left-color:var(--warn)}#gamesList .game-item.low{border-left-color:#ff8800}#gamesList .game-item.unplayable{border-left-color:var(--bad)}#gamesList .game-category{color:var(--accent);font-weight:bold;margin:8px 0 4px 0;padding-bottom:2px;border-bottom:1px solid var(--border)}#systemGrid{display:grid;grid-template-columns:1fr 1fr;gap:8px;margin:8px 0}#systemGrid .metric{background:rgba(0,10,20,0.5);padding:6px;border-radius:4px;border:1px solid var(--border)}#systemGrid .metric .value{color:var(--accent);font-weight:bold;font-size:12px}#mathInputs{display:grid;grid-template-columns:1fr 1fr;gap:8px;margin:8px 0}#mathInputs .input-group{display:flex;flex-direction:column}#mathInputs .input-group label{margin-bottom:2px}#worldControls{display:grid;grid-template-columns:1fr 1fr 1fr;gap:4px;margin:8px 0}#physicsControls{display:grid;grid-tem
plate-columns:1fr 1fr 1fr;gap:4px;margin:8px 0}#benchControls{display:grid;grid-template-columns:1fr 1fr;gap:4px;margin:8px 0}@keyframes neonPulse{0%,100%{box-shadow:0 0 5px var(--glow);border-color:var(--accent)}50%{box-shadow:0 0 25px var(--glow),0 0 35px var(--accent);border-color:#40ffff}}@keyframes dataFlow{0%{transform:translateX(-100%);opacity:0}50%{opacity:1}100%{transform:translateX(300%);opacity:0}}@keyframes fadeIn{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes slideIn{from{transform:translateX(-100%)}to{transform:translateX(0)}}@keyframes glitch{0%{transform:translate(0)}10%{transform:translate(-1px,-1px)}20%{transform:translate(1px,1px)}30%{transform:translate(-1px,1px)}40%{transform:translate(1px,-1px)}50%{transform:translate(0)}100%{transform:translate(0)}}@media(max-width:800px){#mainUI{width:calc(100vw-20px);max-width:440px;font-size:10px}#mathInputs,#worldControls,#physicsControls{grid-template-columns:1fr}#systemGrid{grid-template-columns:1fr}}@media(max-width:600px){#tabs{font-size:8px}#tabs button{padding:4px 6px;min-width:50px}#footer{font-size:9px;padding:6px 8px}}</style></head><body><canvas id="gl"></canvas><div id="crosshair"></div><div id="physicsViz"><div style="color:var(--accent);font-weight:bold;margin-bottom:4px">Physics Engine Status</div><div id="physicsData">Idle</div></div><div id="slingshot"></div><div id="minimap"></div><div id="performanceGraph"></div><div id="mainUI"><div style="font-weight:bold;color:var(--accent);margin-bottom:8px;font-size:14px">NeonForge 3D Ultimate</div><div id="tabs"><button class="active" onclick="switchTab('world')">3D World</button><button onclick="switchTab('physics')">Physics</button><button onclick="switchTab('bench')">Benchmark</button><button onclick="switchTab('games')">Games</button><button onclick="switchTab('math')">Math</button><button onclick="switchTab('system')">System</button></div><div id="world" class="tab-content"><div id="worldControls"><button onclick="generateWorld()">Generate</button>
<button onclick="toggleFly()">Fly Mode</button><button onclick="resetCamera()">Reset Cam</button></div><label>World Seed <span id="seedLabel">12345</span></label><input id="worldSeed" type="range" min="1" max="99999" step="1" value="12345"><label>Render Distance <span id="renderLabel">24</span></label><input id="renderDist" type="range" min="4" max="128" step="1" value="24"><label>Chunk Detail <span id="detailLabel">12</span></label><input id="chunkDetail" type="range" min="2" max="32" step="1" value="12"><label>Biome Complexity <span id="biomeLabel">6</span></label><input id="biomeComp" type="range" min="1" max="16" step="1" value="6"><label>Water Level <span id="waterLabel">32</span></label><input id="waterLevel" type="range" min="0" max="96" step="1" value="32"><label>Movement Speed <span id="speedLabel">8</span></label><input id="moveSpeed" type="range" min="1" max="50" step="0.5" value="8"><label>Shader Quality</label><select id="shaderQuality"><option value="low">Low Quality</option><option value="medium">Medium Quality</option><option value="high" selected>High Quality</option><option value="ultra">Ultra Quality</option><option value="extreme">Extreme Quality</option><option value="insane">Insane Quality</option></select><button onclick="exportWorld()">Export World</button><pre id="worldInfo">World Status: Ready to generate...</pre></div><div id="physics" class="tab-content" style="display:none"><div id="physicsControls"><button onclick="startPhysics()">Start</button><button onclick="addExplosion()">Explosion</button><button onclick="toggleSlingshot()">Slingshot</button></div><label>Gravity <span id="gravLabel">-15.8</span></label><input id="gravity" type="range" min="-100" max="100" step="0.1" value="-15.8"><label>Air Resistance <span id="airLabel">0.025</span></label><input id="airRes" type="range" min="0" max="2" step="0.001" value="0.025"><label>Bounce Factor <span id="bounceLabel">1.2</span></label><input id="bounceFactor" type="range" min="0" max="3" step="0.01" value="1.2"><label>Particle Count <spa
n id="partLabel">5000</span></label><input id="partCount" type="range" min="500" max="50000" step="500" value="5000"><label>Physics Engine</label><select id="physicsEngine"><option value="verlet">Verlet Integration</option><option value="euler">Euler Method</option><option value="rk4" selected>Runge-Kutta 4</option><option value="symplectic">Symplectic</option><option value="molecular">Molecular Dynamics</option></select><button onclick="resetPhysics()">Reset Physics</button><pre id="physicsLog">Physics Engine: Advanced RK4 Ready</pre></div><div id="bench" class="tab-content" style="display:none"><div id="benchControls"><button onclick="startBenchmark()">Start Benchmark</button><button class="danger" onclick="stopBenchmark()">Stop</button></div><label>Benchmark Duration</label><select id="benchDuration"><option value="30">Quick - 30s</option><option value="120">Standard - 2min</option><option value="600">Extended - 10min</option><option value="1800" selected>Long - 30min</option><option value="3600">Ultra - 1hour</option><option value="7200">Extreme - 2hours</option></select><label>Stress Test Mode</label><select id="stressMode"><option value="light">Light Stress</option><option value="medium">Medium Stress</option><option value="heavy" selected>Heavy Stress</option><option value="extreme">Extreme Stress</option><option value="thermal">Thermal Limit</option><option value="destruction">Hardware Destroyer</option></select><label><input type="checkbox" id="thermalWarning">Accept extreme thermal risk</label><label><input type="checkbox" id="autoSave" checked>Auto-save results every 2min</label><button onclick="saveBenchmark()">Save Results</button><button onclick="compareBenchmarks()">Compare</button><pre id="benchResults">Advanced benchmark system ready...</pre><div id="benchProgress"></div></div><div id="games" class="tab-content" style="display:none"><label>Performance Profile</label><select id="perfProfile"><option value="mobile">Mobile Gaming</option><option value="console">Console Quality</option><option value=
"pc" selected>PC Gaming</option><option value="enthusiast">Enthusiast PC</option><option value="vr">VR Ready</option><option value="rtx">RTX Gaming</option></select><label>Target Resolution</label><select id="targetRes"><option value="720p">HD 720p</option><option value="1080p" selected>Full HD 1080p</option><option value="1440p">QHD 1440p</option><option value="4k">Ultra HD 4K</option><option value="8k">8K Gaming</option><option value="16k">16K Future</option></select><button onclick="analyzeGames()">Analyze Performance</button><button onclick="exportGameData()">Export Analysis</button><div id="gamesList"><div style="color:var(--muted);margin:8px 0">Run benchmark to see 2024 game predictions...</div></div></div><div id="math" class="tab-content" style="display:none"><label style="color:var(--accent);font-weight:bold">Advanced Physics Calculator</label><div id="mathInputs"><div class="input-group"><label>Initial Velocity (m/s)</label><input id="slingshotVel" type="number" value="35" step="0.1"></div><div class="input-group"><label>Launch Angle (degrees)</label><input id="slingshotAngle" type="number" value="42" step="1"></div><div class="input-group"><label>Target Distance (m)</label><input id="targetDist" type="number" value="75" step="1"></div><div class="input-group"><label>Wind Speed (m/s)</label><input id="windSpeed" type="number" value="0" step="0.1"></div></div><button onclick="calculateTrajectory()">Calculate Trajectory</button><button onclick="simulateShot()">Simulate Shot</button><button onclick="optimizeAngle()">Optimize Angle</button><button onclick="calculateOrbital()">Orbital Mechanics</button><pre id="mathResults">Advanced physics calculations ready...</pre><canvas id="trajectoryCanvas" width="420" height="240"></canvas></div><div id="system" class="tab-content" style="display:none"><div id="systemGrid"><div class="metric"><div style="color:var(--muted);font-size:9px">GPU</div><div class="value" id="gpuInfo">Detecting...</div></div><div class="metric"><div style="color:var(--muted);font-size:9px">R
AM</div><div class="value" id="ramInfo">0 MB</div></div><div class="metric"><div style="color:var(--muted);font-size:9px">CPU Cores</div><div class="value" id="cpuInfo">0</div></div><div class="metric"><div style="color:var(--muted);font-size:9px">WebGL</div><div class="value" id="webglInfo">Unknown</div></div></div><button onclick="exportSystemData()">Export System Info</button><button onclick="runDiagnostics()">Run Diagnostics</button><pre id="diagnosticsLog">Advanced system analysis ready...</pre></div></div><div id="footer">FPS: 0 | GPU: Loading... | RAM: 0MB | Temp: 0°C</div>
<script>
let gl,canvas,state={lastFpsUpdate:0,flyMode:false},programs={},textures={},buffers={},world={seed:12345,chunks:[],renderDistance:24},physics={active:false,particles:[],explosions:[],gravity:-15.8,airResistance:0.025,bounceFactor:1.2,engine:'rk4',spatialGrid:new Map(),forces:[],constraints:[]},benchmark={active:false,startTime:0,duration:1800000,samples:[],results:{fps:[],temperatures:[]},lastResults:null},math={slingshot:{active:false,projectile:null,wind:[0,0,0],targets:[]}},camera={x:0,y:80,z:0,pitch:0,yaw:0},keys={},mouse={locked:false},frameCount=0,startTime=performance.now(),fpsHistory=[],temperatures=[];canvas=document.getElementById('gl');gl=canvas.getContext('webgl2',{antialias:true,powerPreference:'high-performance'})||canvas.getContext('webgl',{antialias:true,powerPreference:'high-performance'});if(!gl){document.body.innerHTML='<div style="color:red;padding:50px;font-size:24px;text-align:center">WebGL not supported</div>';throw new Error('WebGL not supported');}function resizeCanvas(){const dpr=Math.min(2.5,window.devicePixelRatio||1);const w=Math.floor(window.innerWidth*dpr);const h=Math.floor(window.innerHeight*dpr);if(canvas.width!==w||canvas.height!==h){canvas.width=w;canvas.height=h;canvas.style.width=window.innerWidth+'px';canvas.style.height=window.innerHeight+'px';if(gl)gl.viewport(0,0,w,h);}}window.addEventListener('resize',resizeCanvas);resizeCanvas();function mat4Identity(){return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);}function mat4Perspective(fov,aspect,near,far){const f=1.0/Math.tan(fov*0.5);const nf=1/(near-far);return new Float32Array([f/aspect,0,0,0,0,f,0,0,0,0,(far+near)*nf,-1,0,0,(2*far*near)*nf,0]);}function mat4LookAt(eye,center,up){const zAxis=normalize([eye[0]-center[0],eye[1]-center[1],eye[2]-center[2]]);const xAxis=normalize(cross(up,zAxis));const yAxis=cross(zAxis,xAxis);return new Float32Array([xAxis[0],yAxis[0],zAxis[0],0,xAxis[1],yAxis[1],zAxis[1],0,xAxis[2],yAxis[2],zAxis[2],0,-dot(xAxis,eye),-dot(yAxis,eye),-dot(zAxis,eye),1]);}function mat4Multiply(a,b){cons
t result=new Float32Array(16);for(let i=0;i<4;i++){for(let j=0;j<4;j++){result[i*4+j]=a[i*4+0]*b[0*4+j]+a[i*4+1]*b[1*4+j]+a[i*4+2]*b[2*4+j]+a[i*4+3]*b[3*4+j];}}return result;}function normalize(v){const len=Math.sqrt(v[0]*v[0]+v[1]*v[1]+v[2]*v[2]);return len>0?[v[0]/len,v[1]/len,v[2]/len]:[0,0,0];}function cross(a,b){return[a[1]*b[2]-a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]-a[1]*b[0]];}function dot(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2];}function distance(a,b){const dx=a[0]-b[0],dy=a[1]-b[1],dz=a[2]-b[2];return Math.sqrt(dx*dx+dy*dy+dz*dz);}function noise3D(x,y,z){const p=((Math.floor(x)*73+Math.floor(y)*37+Math.floor(z)*17)*0.00173)%1;return(Math.sin(p*43758.5453)*0.5+0.5);}function fbm3D(x,y,z,octaves=8){let value=0,amplitude=0.6,frequency=1.2;for(let i=0;i<octaves;i++){value+=amplitude*noise3D(x*frequency,y*frequency,z*frequency);amplitude*=0.55;frequency*=1.85;}return value;}const VERTEX_SHADERS={world:`#version 300 es
precision highp float;in vec3 a_position;in vec2 a_texCoord;in vec3 a_normal;in float a_blockType;uniform mat4 u_mvp;uniform mat4 u_model;uniform float u_time;uniform vec3 u_cameraPos;out vec2 v_texCoord;out vec3 v_normal;out vec3 v_worldPos;out float v_blockType;out float v_distance;void main(){vec4 worldPos=u_model*vec4(a_position,1.0);gl_Position=u_mvp*worldPos;v_texCoord=a_texCoord+vec2(sin(u_time*0.0012+a_position.x*0.08)*0.003,cos(u_time*0.0009+a_position.z*0.08)*0.003);v_normal=normalize((u_model*vec4(a_normal,0.0)).xyz);v_worldPos=worldPos.xyz;v_blockType=a_blockType;v_distance=length(u_cameraPos-worldPos.xyz);}`,particle:`#version 300 es
precision highp float;in vec3 a_position;in vec3 a_velocity;in float a_life;uniform mat4 u_mvp;uniform float u_time;uniform float u_pointSize;out vec3 v_color;out float v_life;void main(){vec3 pos=a_position+a_velocity*u_time*0.0015;pos.y+=sin(u_time*0.0025+pos.x*0.15)*3.5;gl_Position=u_mvp*vec4(pos,1.0);gl_PointSize=u_pointSize*(1.2-v_life*0.7);v_color=vec3(0.3+sin(u_time*0.002+pos.x*0.1)*0.7,0.6+cos(u_time*0.0018+pos.y*0.1)*0.4,0.9);v_life=a_life;}`};const FRAGMENT_SHADERS={world:`#version 300 es
precision highp float;in vec2 v_texCoord;in vec3 v_normal;in vec3 v_worldPos;in float v_blockType;in float v_distance;uniform float u_time;uniform vec3 u_cameraPos;uniform vec3 u_lightDir;out vec4 fragColor;float hash(vec3 p){p=fract(p*0.3183099+0.1);p*=17.0;return fract(p.x*p.y*p.z*(p.x+p.y+p.z));}float noise(vec3 p){vec3 i=floor(p);vec3 f=fract(p);f=f*f*(3.0-2.0*f);return mix(mix(mix(hash(i+vec3(0,0,0)),hash(i+vec3(1,0,0)),f.x),mix(hash(i+vec3(0,1,0)),hash(i+vec3(1,1,0)),f.x),f.y),mix(mix(hash(i+vec3(0,0,1)),hash(i+vec3(1,0,1)),f.x),mix(hash(i+vec3(0,1,1)),hash(i+vec3(1,1,1)),f.x),f.y),f.z);}float fbm(vec3 p){float value=0.0;float amplitude=0.6;float frequency=1.2;for(int i=0;i<8;i++){value+=amplitude*noise(p*frequency);amplitude*=0.55;frequency*=1.85;}return value;}vec3 getBlockColor(float blockType,vec3 worldPos){vec3 baseNoise=vec3(fbm(worldPos*0.4),fbm(worldPos*0.6+100.0),fbm(worldPos*0.5+200.0));if(blockType<0.08)return vec3(0.15,0.85,0.25)+baseNoise*0.3;else if(blockType<0.16)return vec3(0.65,0.45,0.15)+baseNoise*0.25;else if(blockType<0.24)return vec3(0.55,0.55,0.6)+baseNoise*0.2;else if(blockType<0.32)return vec3(0.75,0.8,0.9)+baseNoise*0.35;else if(blockType<0.4)return vec3(0.95,0.5,0.1)+baseNoise*0.15;else if(blockType<0.48)return vec3(0.35,0.25,0.15)+baseNoise*0.2;else if(blockType<0.56)return vec3(0.12,0.12,0.12)+baseNoise*0.1;else if(blockType<0.64)return vec3(0.95,0.95,0.15)+baseNoise*0.08;else if(blockType<0.72)return vec3(0.8,0.15,0.15)+baseNoise*0.25;else if(blockType<0.8)return vec3(0.15,0.15,0.95)+baseNoise*0.2;else if(blockType<0.88)return vec3(0.9,0.2,0.9)+baseNoise*0.15;else return vec3(0.15,0.95,0.95)+baseNoise*0.12;}void main(){vec3 baseColor=getBlockColor(v_blockType,v_worldPos);vec3 normal=normalize(v_normal);vec3 lightDir=normalize(-u_lightDir);vec3 viewDir=normalize(u_cameraPos-v_worldPos);float NdotL=max(0.0,dot(normal,lightDir));vec3 halfDir=normalize(lightDir+viewDir);float NdotH=max(0.0,dot(normal,halfDir));float specular=pow(NdotH,64.0)*0.5;vec3 ambient=baseColor*0.25;vec3 diffu
se=baseColor*NdotL*0.85;vec3 specularColor=vec3(1.0)*specular;vec3 color=ambient+diffuse+specularColor;float fogDistance=120.0;float fogFactor=exp(-v_distance/fogDistance);color=mix(vec3(0.7,0.8,1.0),color,fogFactor);fragColor=vec4(color,1.0);}`,particle:`#version 300 es
precision highp float;in vec3 v_color;in float v_life;out vec4 fragColor;void main(){vec2 coord=gl_PointCoord*2.0-1.0;float dist=dot(coord,coord);if(dist>1.0)discard;float alpha=1.0-dist;alpha*=(1.0-v_life);vec3 color=v_color*(1.0+sin(v_life*6.28318)*0.6);fragColor=vec4(color,alpha);}`};function createShader(type,source){const shader=gl.createShader(type);gl.shaderSource(shader,source);gl.compileShader(shader);if(!gl.getShaderParameter(shader,gl.COMPILE_STATUS)){console.error('Shader error:',gl.getShaderInfoLog(shader));return null;}return shader;}function createProgram(vertexSource,fragmentSource){const vs=createShader(gl.VERTEX_SHADER,vertexSource);const fs=createShader(gl.FRAGMENT_SHADER,fragmentSource);if(!vs||!fs)return null;const program=gl.createProgram();gl.attachShader(program,vs);gl.attachShader(program,fs);gl.linkProgram(program);if(!gl.getProgramParameter(program,gl.LINK_STATUS)){console.error('Program error:',gl.getProgramInfoLog(program));return null;}return program;}function initShaders(){programs.world=createProgram(VERTEX_SHADERS.world,FRAGMENT_SHADERS.world);programs.particle=createProgram(VERTEX_SHADERS.particle,FRAGMENT_SHADERS.particle);if(programs.world){const p=programs.world;p.attribLoc={position:gl.getAttribLocation(p,'a_position'),texCoord:gl.getAttribLocation(p,'a_texCoord'),normal:gl.getAttribLocation(p,'a_normal'),blockType:gl.getAttribLocation(p,'a_blockType')};p.uniformLoc={mvp:gl.getUniformLocation(p,'u_mvp'),model:gl.getUniformLocation(p,'u_model'),time:gl.getUniformLocation(p,'u_time'),cameraPos:gl.getUniformLocation(p,'u_cameraPos'),lightDir:gl.getUniformLocation(p,'u_lightDir')};}if(programs.particle){const p=programs.particle;p.attribLoc={position:gl.getAttribLocation(p,'a_position'),velocity:gl.getAttribLocation(p,'a_velocity'),life:gl.getAttribLocation(p,'a_life')};p.uniformLoc={mvp:gl.getUniformLocation(p,'u_mvp'),time:gl.getUniformLocation(p,'u_time'),pointSize:gl.getUniformLocation(p,'u_pointSize')};}}function initPhysicsEngine(){physics.particles=[];for(let i=0;i<5000;i+
+){physics.particles.push({id:i,position:[Math.random()*200-100,Math.random()*100+80,Math.random()*200-100],velocity:[Math.random()*30-15,Math.random()*15-7.5,Math.random()*30-15],acceleration:[0,0,0],mass:Math.random()*3+0.8,radius:Math.random()*0.8+0.3,life:1,color:[Math.random(),Math.random(),Math.random()],forces:[],active:true,prevPosition:null});}}function updatePhysics(deltaTime){if(!physics.active)return;const dt=Math.min(deltaTime*0.001,1/25);physics.forces.length=0;for(const particle of physics.particles){if(!particle.active)continue;particle.acceleration=[0,physics.gravity,0];for(const force of particle.forces){particle.acceleration[0]+=force[0]/particle.mass;particle.acceleration[1]+=force[1]/particle.mass;particle.acceleration[2]+=force[2]/particle.mass;}particle.forces.length=0;switch(physics.engine){case'euler':updateEuler(particle,dt);break;case'verlet':updateVerlet(particle,dt);break;case'rk4':updateRK4(particle,dt);break;case'symplectic':updateSymplectic(particle,dt);break;case'molecular':updateMolecular(particle,dt);break;}applyAirResistance(particle);handleBoundaryCollisions(particle);particle.life-=dt*0.08;if(particle.life<=0){respawnParticle(particle);}}updateExplosions(deltaTime);}function updateEuler(particle,dt){particle.velocity[0]+=particle.acceleration[0]*dt;particle.velocity[1]+=particle.acceleration[1]*dt;particle.velocity[2]+=particle.acceleration[2]*dt;particle.position[0]+=particle.velocity[0]*dt;particle.position[1]+=particle.velocity[1]*dt;particle.position[2]+=particle.velocity[2]*dt;}function updateVerlet(particle,dt){if(!particle.prevPosition){particle.prevPosition=[particle.position[0],particle.position[1],particle.position[2]];}const newX=2*particle.position[0]-particle.prevPosition[0]+particle.acceleration[0]*dt*dt;const newY=2*particle.position[1]-particle.prevPosition[1]+particle.acceleration[1]*dt*dt;const newZ=2*particle.position[2]-particle.prevPosition[2]+particle.acceleration[2]*dt*dt;particle.prevPosition[0]=particle.position[0];particle.prevPosition[1]=particle.po
sition[1];particle.prevPosition[2]=particle.position[2];particle.position[0]=newX;particle.position[1]=newY;particle.position[2]=newZ;particle.velocity[0]=(particle.position[0]-particle.prevPosition[0])/dt;particle.velocity[1]=(particle.position[1]-particle.prevPosition[1])/dt;particle.velocity[2]=(particle.position[2]-particle.prevPosition[2])/dt;}



function updateRK4(particle,dt){function computeAcceleration(pos,vel){const acc=[0,physics.gravity,0];const drag=physics.airResistance;acc[0]-=vel[0]*drag;acc[1]-=vel[1]*drag;acc[2]-=vel[2]*drag;return acc;}const k1v=computeAcceleration(particle.position,particle.velocity);const k1p=[particle.velocity[0],particle.velocity[1],particle.velocity[2]];const k2v=computeAcceleration([particle.position[0]+k1p[0]*dt*0.5,particle.position[1]+k1p[1]*dt*0.5,particle.position[2]+k1p[2]*dt*0.5],[particle.velocity[0]+k1v[0]*dt*0.5,particle.velocity[1]+k1v[1]*dt*0.5,particle.velocity[2]+k1v[2]*dt*0.5]);const k2p=[particle.velocity[0]+k1v[0]*dt*0.5,particle.velocity[1]+k1v[1]*dt*0.5,particle.velocity[2]+k1v[2]*dt*0.5];const k3v=computeAcceleration([particle.position[0]+k2p[0]*dt*0.5,particle.position[1]+k2p[1]*dt*0.5,particle.position[2]+k2p[2]*dt*0.5],[particle.velocity[0]+k2v[0]*dt*0.5,particle.velocity[1]+k2v[1]*dt*0.5,particle.velocity[2]+k2v[2]*dt*0.5]);const k3p=[particle.velocity[0]+k2v[0]*dt*0.5,particle.velocity[1]+k2v[1]*dt*0.5,particle.velocity[2]+k2v[2]*dt*0.5];const k4v=computeAcceleration([particle.position[0]+k3p[0]*dt,particle.position[1]+k3p[1]*dt,particle.position[2]+k3p[2]*dt],[particle.velocity[0]+k3v[0]*dt,particle.velocity[1]+k3v[1]*dt,particle.velocity[2]+k3v[2]*dt]);const k4p=[particle.velocity[0]+k3v[0]*dt,particle.velocity[1]+k3v[1]*dt,particle.velocity[2]+k3v[2]*dt];particle.velocity[0]+=(k1v[0]+2*k2v[0]+2*k3v[0]+k4v[0])*dt/6;particle.velocity[1]+=(k1v[1]+2*k2v[1]+2*k3v[1]+k4v[1])*dt/6;particle.velocity[2]+=(k1v[2]+2*k2v[2]+2*k3v[2]+k4v[2])*dt/6;particle.position[0]+=(k1p[0]+2*k2p[0]+2*k3p[0]+k4p[0])*dt/6;particle.position[1]+=(k1p[1]+2*k2p[1]+2*k3p[1]+k4p[1])*dt/6;particle.position[2]+=(k1p[2]+2*k2p[2]+2*k3p[2]+k4p[2])*dt/6;}function updateSymplectic(particle,dt){particle.velocity[0]+=particle.acceleration[0]*dt;particle.velocity[1]+=particle.acceleration[1]*dt;particle.velocity[2]+=particle.acceleration[2]*dt;particle.position[0]+=particle.velocity[0]*dt;particle.position[1]+=particle.velocity[1]*dt;p
article.position[2]+=particle.velocity[2]*dt;}function updateMolecular(particle,dt){const temp=300.0;const kB=1.38064852e-23;const thermalVel=Math.sqrt(3*kB*temp/particle.mass)*100;particle.velocity[0]+=particle.acceleration[0]*dt+(Math.random()-0.5)*thermalVel*dt;particle.velocity[1]+=particle.acceleration[1]*dt+(Math.random()-0.5)*thermalVel*dt;particle.velocity[2]+=particle.acceleration[2]*dt+(Math.random()-0.5)*thermalVel*dt;particle.position[0]+=particle.velocity[0]*dt;particle.position[1]+=particle.velocity[1]*dt;particle.position[2]+=particle.velocity[2]*dt;}function applyAirResistance(particle){const drag=physics.airResistance;particle.velocity[0]*=(1-drag);particle.velocity[1]*=(1-drag);particle.velocity[2]*=(1-drag);}function handleBoundaryCollisions(particle){const bounds={minX:-150,maxX:150,minY:0,maxY:300,minZ:-150,maxZ:150};if(particle.position[0]<bounds.minX){particle.position[0]=bounds.minX;particle.velocity[0]*=-physics.bounceFactor;}if(particle.position[0]>bounds.maxX){particle.position[0]=bounds.maxX;particle.velocity[0]*=-physics.bounceFactor;}if(particle.position[1]<bounds.minY){particle.position[1]=bounds.minY;particle.velocity[1]*=-physics.bounceFactor;const frictionFactor=0.85;particle.velocity[0]*=frictionFactor;particle.velocity[2]*=frictionFactor;}if(particle.position[1]>bounds.maxY){particle.position[1]=bounds.maxY;particle.velocity[1]*=-physics.bounceFactor;}if(particle.position[2]<bounds.minZ){particle.position[2]=bounds.minZ;particle.velocity[2]*=-physics.bounceFactor;}if(particle.position[2]>bounds.maxZ){particle.position[2]=bounds.maxZ;particle.velocity[2]*=-physics.bounceFactor;}}function respawnParticle(particle){particle.position=[Math.random()*300-150,Math.random()*100+200,Math.random()*300-150];particle.velocity=[Math.random()*40-20,Math.random()*10-5,Math.random()*40-20];particle.life=1;particle.color=[Math.random(),Math.random(),Math.random()];particle.mass=Math.random()*3+0.8;particle.radius=Math.random()*0.8+0.3;particle.active=true;}function updateExplosions(deltaTime){f
or(let i=physics.explosions.length-1;i>=0;i--){const explosion=physics.explosions[i];explosion.life-=deltaTime*0.001;explosion.radius+=explosion.expansionRate*deltaTime*0.001;if(explosion.life<=0){physics.explosions.splice(i,1);continue;}for(const particle of physics.particles){if(!particle.active)continue;const dx=particle.position[0]-explosion.position[0];const dy=particle.position[1]-explosion.position[1];const dz=particle.position[2]-explosion.position[2];const dist=Math.sqrt(dx*dx+dy*dy+dz*dz);if(dist<explosion.radius&&dist>0){const force=explosion.force*(1-dist/explosion.radius);const forceVec=[dx/dist*force,dy/dist*force,dz/dist*force];particle.forces.push(forceVec);particle.color=[1,Math.random()*0.5+0.5,Math.random()*0.3];}}}}function addExplosion(){const explosion={position:[camera.x+Math.random()*40-20,camera.y+Math.random()*20-10,camera.z+Math.random()*40-20],force:2500,radius:8,expansionRate:85,life:4.5,color:[1,0.6,0]};physics.explosions.push(explosion);}function generateWorldChunk(chunkX,chunkZ,seed){const chunk={x:chunkX,z:chunkZ,blocks:[],vertices:[],indices:[],normals:[],texCoords:[],blockTypes:[],buffer:null,indexBuffer:null,vertexCount:0};const chunkSize=16;const maxHeight=96;for(let x=0;x<chunkSize;x++){chunk.blocks[x]=[];for(let z=0;z<chunkSize;z++){chunk.blocks[x][z]=[];const worldX=chunkX*chunkSize+x;const worldZ=chunkZ*chunkSize+z;const height=generateHeight(worldX,worldZ,seed);for(let y=0;y<=maxHeight;y++){if(y<=height){const blockType=getBlockType(worldX,y,worldZ,height,seed);chunk.blocks[x][z][y]={type:blockType,solid:true};}else{chunk.blocks[x][z][y]={type:0,solid:false};}}}}generateChunkMesh(chunk);return chunk;}function generateHeight(x,z,seed){let height=45;height+=Math.sin(x*0.008+seed*0.1)*12;height+=Math.sin(z*0.008+seed*0.7)*10;height+=Math.sin(x*0.003+z*0.003+seed*0.3)*18;height+=fbm3D(x*0.015,0,z*0.015,6)*15;height+=Math.sin(x*0.002+seed*1.1)*25;const ridgeNoise=Math.abs(fbm3D(x*0.006,0,z*0.006,4)-0.5)*2;height+=ridgeNoise*12;const caveNoise=fbm3D(x*0.08,height*0.08,z*0.08,4)
;if(caveNoise>0.65)height-=8;const mountainNoise=fbm3D(x*0.001,0,z*0.001,3);if(mountainNoise>0.6)height+=mountainNoise*35;return Math.max(8,Math.min(maxHeight-8,Math.floor(height)));}function getBlockType(x,y,z,surfaceHeight,seed){if(y>surfaceHeight)return 0;const biome=getBiome(x,z,seed);const depth=surfaceHeight-y;if(y===surfaceHeight){if(biome<0.15)return 1;else if(biome<0.3)return 2;else if(biome<0.45)return 3;else if(biome<0.6)return 4;else if(biome<0.75)return 5;else return 6;}else if(depth<4){return 2;}else if(depth<12){return 7;}else if(y<15){return 11;}else{const oreChance=fbm3D(x*0.08,y*0.08,z*0.08,4);if(oreChance>0.85)return 10;else if(oreChance>0.78)return 9;else if(oreChance>0.72)return 8;else return 7;}}function getBiome(x,z,seed){const temp=fbm3D(x*0.002,0,z*0.002,5)+seed*0.05;const humidity=fbm3D(x*0.0035,0,z*0.0035,4)+seed*0.15;const elevation=fbm3D(x*0.001,0,z*0.001,3);return Math.abs((temp*humidity+elevation)*2.3)%1;}function generateChunkMesh(chunk){chunk.vertices=[];chunk.indices=[];chunk.normals=[];chunk.texCoords=[];chunk.blockTypes=[];let vertexIndex=0;const chunkSize=16;for(let x=0;x<chunkSize;x++){for(let y=0;y<96;y++){for(let z=0;z<chunkSize;z++){const block=chunk.blocks[x][z][y];if(!block||!block.solid)continue;const faces=[];if(!isBlockSolid(chunk,x,y+1,z))faces.push('top');if(!isBlockSolid(chunk,x,y-1,z))faces.push('bottom');if(!isBlockSolid(chunk,x+1,y,z))faces.push('right');if(!isBlockSolid(chunk,x-1,y,z))faces.push('left');if(!isBlockSolid(chunk,x,y,z+1))faces.push('front');if(!isBlockSolid(chunk,x,y,z-1))faces.push('back');for(const face of faces){const faceVertices=getFaceVertices(x,y,z,face);const faceNormals=getFaceNormals(face);const faceTexCoords=getFaceTexCoords(face);for(let i=0;i<faceVertices.length;i+=3){chunk.vertices.push(faceVertices[i],faceVertices[i+1],faceVertices[i+2]);chunk.normals.push(faceNormals[0],faceNormals[1],faceNormals[2]);chunk.blockTypes.push(block.type/12);}for(let i=0;i<faceTexCoords.length;i+=2){chunk.texCoords.push(faceTexCoords[i],faceTexCoords[i+
1]);}chunk.indices.push(vertexIndex,vertexIndex+1,vertexIndex+2,vertexIndex,vertexIndex+2,vertexIndex+3);vertexIndex+=4;}}}}chunk.vertexCount=chunk.indices.length;createChunkBuffers(chunk);}function isBlockSolid(chunk,x,y,z){if(x<0||x>=16||z<0||z>=16||y<0||y>=96)return false;return chunk.blocks[x][z][y]&&chunk.blocks[x][z][y].solid;}function getFaceVertices(x,y,z,face){const vertices=[];switch(face){case'top':vertices.push(x,y+1,z,x+1,y+1,z,x+1,y+1,z+1,x,y+1,z+1);break;case'bottom':vertices.push(x,y,z+1,x+1,y,z+1,x+1,y,z,x,y,z);break;case'right':vertices.push(x+1,y,z,x+1,y+1,z,x+1,y+1,z+1,x+1,y,z+1);break;case'left':vertices.push(x,y,z+1,x,y+1,z+1,x,y+1,z,x,y,z);break;case'front':vertices.push(x,y,z+1,x+1,y,z+1,x+1,y+1,z+1,x,y+1,z+1);break;case'back':vertices.push(x+1,y,z,x,y,z,x,y+1,z,x+1,y+1,z);break;}return vertices;}function getFaceNormals(face){switch(face){case'top':return[0,1,0];case'bottom':return[0,-1,0];case'right':return[1,0,0];case'left':return[-1,0,0];case'front':return[0,0,1];case'back':return[0,0,-1];default:return[0,1,0];}}function getFaceTexCoords(face){return[0,0,1,0,1,1,0,1];}function createChunkBuffers(chunk){if(chunk.vertices.length===0)return;chunk.buffer=gl.createBuffer();gl.bindBuffer(gl.ARRAY_BUFFER,chunk.buffer);const interleavedData=new Float32Array(chunk.vertices.length/3*8);for(let i=0,j=0;i<chunk.vertices.length;i+=3,j+=8){interleavedData[j]=chunk.vertices[i];interleavedData[j+1]=chunk.vertices[i+1];interleavedData[j+2]=chunk.vertices[i+2];interleavedData[j+3]=chunk.texCoords[(i/3)*2];interleavedData[j+4]=chunk.texCoords[(i/3)*2+1];interleavedData[j+5]=chunk.normals[i];interleavedData[j+6]=chunk.normals[i+1];interleavedData[j+7]=chunk.normals[i+2];interleavedData[j+8]=chunk.blockTypes[i/3];}gl.bufferData(gl.ARRAY_BUFFER,interleavedData,gl.STATIC_DRAW);chunk.indexBuffer=gl.createBuffer();gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,chunk.indexBuffer);gl.bufferData(gl.ELEMENT_ARRAY_BUFFER,new Uint16Array(chunk.indices),gl.STATIC_DRAW);}function generateWorld(){const seed=parseInt(document.get
ElementById('worldSeed').value);const renderDist=parseInt(document.getElementById('renderDist').value);world={seed:seed,chunks:[],renderDistance:renderDist,center:{x:Math.floor(camera.x/16),z:Math.floor(camera.z/16)}};const centerX=world.center.x;const centerZ=world.center.z;const chunksToGenerate=[];for(let x=-renderDist;x<=renderDist;x++){for(let z=-renderDist;z<=renderDist;z++){if(x*x+z*z<=renderDist*renderDist){chunksToGenerate.push({x:centerX+x,z:centerZ+z});}}}let generated=0;function generateNext(){if(generated>=chunksToGenerate.length){document.getElementById('worldInfo').textContent=`Advanced world generated!\nSeed: ${seed}\nChunks: ${world.chunks.length}\nRender Distance: ${renderDist}\nBlocks: ${world.chunks.length*16*16*48}`;return;}const chunkPos=chunksToGenerate[generated];const chunk=generateWorldChunk(chunkPos.x,chunkPos.z,seed);world.chunks.push(chunk);generated++;document.getElementById('worldInfo').textContent=`Generating world... ${Math.floor(generated/chunksToGenerate.length*100)}%\nChunks: ${generated}/${chunksToGenerate.length}`;setTimeout(generateNext,1);}generateNext();}function updateWorldChunks(){if(!world.chunks)return;const currentChunkX=Math.floor(camera.x/16);const currentChunkZ=Math.floor(camera.z/16);const renderDist=world.renderDistance;if(Math.abs(currentChunkX-world.center.x)>3||Math.abs(currentChunkZ-world.center.z)>3){world.center={x:currentChunkX,z:currentChunkZ};const chunksToKeep=[];for(const chunk of world.chunks){const dx=chunk.x-currentChunkX;const dz=chunk.z-currentChunkZ;if(dx*dx+dz*dz<=renderDist*renderDist){chunksToKeep.push(chunk);}else{if(chunk.buffer)gl.deleteBuffer(chunk.buffer);if(chunk.indexBuffer)gl.deleteBuffer(chunk.indexBuffer);}}world.chunks=chunksToKeep;for(let x=-renderDist;x<=renderDist;x++){for(let z=-renderDist;z<=renderDist;z++){if(x*x+z*z<=renderDist*renderDist){const chunkX=currentChunkX+x;const chunkZ=currentChunkZ+z;if(!world.chunks.find(c=>c.x===chunkX&&c.z===chunkZ)){const chunk=generateWorldChunk(chunkX,chunkZ,world.seed);world.chunks.push(ch
unk);}}}}}}function getTerrainHeight(x,z){if(!world.chunks.length)return 45;const chunkX=Math.floor(x/16);const chunkZ=Math.floor(z/16);const chunk=world.chunks.find(c=>c.x===chunkX&&c.z===chunkZ);if(!chunk)return 45;const localX=Math.floor(x-chunkX*16);const localZ=Math.floor(z-chunkZ*16);if(localX<0||localX>=16||localZ<0||localZ>=16)return 45;for(let y=95;y>=0;y--){if(chunk.blocks[localX][localZ][y]&&chunk.blocks[localX][localZ][y].solid){return y+1;}}return 0;}function initBenchmarkSystem(){benchmark={active:false,startTime:0,duration:1800000,samples:[],currentStress:'heavy',results:{fps:[],frameTimes:[],temperatures:[],gpuUsage:[],memUsage:[],powerDraw:[]},stressTests:[],autoSave:true,thermalMonitoring:true,progressCallback:null};benchmark.stressTests=[{name:'BasicCubes',intensity:1.5,particleCount:500,complexity:2},{name:'ParticleStorm',intensity:4,particleCount:2000,complexity:4},{name:'PhysicsHeavy',intensity:7,particleCount:8000,complexity:8},{name:'ShaderIntensive',intensity:9,particleCount:5000,complexity:12},{name:'ThermalStress',intensity:12,particleCount:20000,complexity:16},{name:'HardwareDestroyer',intensity:15,particleCount:50000,complexity:24}];}function startBenchmark(){if(benchmark.active)return;const duration=parseInt(document.getElementById('benchDuration').value)*1000;const stressMode=document.getElementById('stressMode').value;const thermalAccepted=document.getElementById('thermalWarning').checked;if((duration>600000||stressMode==='thermal'||stressMode==='destruction')&&!thermalAccepted){alert('Please accept extreme thermal risk for extended/destructive benchmarks');return;}benchmark.active=true;benchmark.startTime=performance.now();benchmark.duration=duration;benchmark.currentStress=stressMode;benchmark.samples=[];benchmark.results={fps:[],frameTimes:[],temperatures:[],gpuUsage:[],memUsage:[],powerDraw:[]};applyStressSettings(stressMode);document.getElementById('benchResults').textContent='Advanced benchmark running...';const progressInterval=setInterval(()=>{if(!benchmark.active){clearInt
erval(progressInterval);return;}const elapsed=performance.now()-benchmark.startTime;const progress=(elapsed/benchmark.duration)*100;updateBenchmarkProgress(Math.min(100,progress));if(elapsed>=benchmark.duration){stopBenchmark();}},50);if(benchmark.autoSave){const saveInterval=setInterval(()=>{if(!benchmark.active){clearInterval(saveInterval);return;}saveBenchmarkData();},120000);}}function applyStressSettings(mode){const settings={light:{particles:1000,complexity:3,renderDist:12,shaderQuality:'medium'},medium:{particles:2500,complexity:6,renderDist:20,shaderQuality:'high'},heavy:{particles:5000,complexity:12,renderDist:32,shaderQuality:'ultra'},extreme:{particles:12000,complexity:16,renderDist:48,shaderQuality:'extreme'},thermal:{particles:25000,complexity:24,renderDist:64,shaderQuality:'insane'},destruction:{particles:50000,complexity:32,renderDist:128,shaderQuality:'insane'}};const setting=settings[mode]||settings.heavy;document.getElementById('partCount').value=setting.particles;document.getElementById('chunkDetail').value=setting.complexity;document.getElementById('renderDist').value=setting.renderDist;document.getElementById('shaderQuality').value=setting.shaderQuality;if(mode==='thermal'||mode==='extreme'||mode==='destruction'){physics.active=true;for(let i=0;i<setting.particles;i++){if(i<physics.particles.length){respawnParticle(physics.particles[i]);}else{physics.particles.push({id:i,position:[Math.random()*300-150,Math.random()*200+100,Math.random()*300-150],velocity:[Math.random()*50-25,Math.random()*20-10,Math.random()*50-25],acceleration:[0,0,0],mass:Math.random()*4+1,radius:Math.random()*1+0.4,life:1,color:[Math.random(),Math.random(),Math.random()],forces:[],active:true,prevPosition:null});}}}updateUILabels();}



function updateBenchmarkProgress(progress){const progressDiv=document.getElementById('benchProgress');if(!progressDiv)return;const elapsed=performance.now()-benchmark.startTime;const fps=fpsHistory.length>0?fpsHistory[fpsHistory.length-1]:0;const temp=getEstimatedTemperature();const gpuUsage=Math.min(100,fps/120*100);benchmark.results.fps.push(fps);benchmark.results.frameTimes.push(elapsed);benchmark.results.temperatures.push(temp);benchmark.results.gpuUsage.push(gpuUsage);const recentFps=benchmark.results.fps.slice(-120);const avgFps=recentFps.reduce((a,b)=>a+b,0)/recentFps.length;const minFps=Math.min(...recentFps);const maxFps=Math.max(...recentFps);const p1Fps=recentFps.slice().sort((a,b)=>a-b)[Math.floor(recentFps.length*0.01)]||minFps;const p5Fps=recentFps.slice().sort((a,b)=>a-b)[Math.floor(recentFps.length*0.05)]||minFps;progressDiv.innerHTML=`<div style="display:flex;justify-content:space-between;padding:6px;font-size:10px;flex-wrap:wrap"><div>Progress: ${progress.toFixed(1)}%</div><div>FPS: ${avgFps.toFixed(1)} (${minFps.toFixed(1)}-${maxFps.toFixed(1)})</div><div>1%: ${p1Fps.toFixed(1)}</div><div>5%: ${p5Fps.toFixed(1)}</div><div>Temp: ${temp}°C</div><div>GPU: ${gpuUsage.toFixed(1)}%</div></div><div style="width:${progress}%;height:6px;background:linear-gradient(90deg,#00d4ff,#20ff20,#ffaa20,#ff4040);border-radius:3px;box-shadow:0 0 10px rgba(0,212,255,0.5)"></div>`;}function stopBenchmark(){if(!benchmark.active)return;benchmark.active=false;const elapsed=performance.now()-benchmark.startTime;const totalSamples=benchmark.results.fps.length;if(totalSamples===0){document.getElementById('benchResults').textContent='No benchmark data collected';return;}const avgFps=benchmark.results.fps.reduce((a,b)=>a+b,0)/totalSamples;const minFps=Math.min(...benchmark.results.fps);const maxFps=Math.max(...benchmark.results.fps);const sortedFps=benchmark.results.fps.slice().sort((a,b)=>a-b);const p1Fps=sortedFps[Math.floor(totalSamples*0.01)]||minFps;const p5Fps=sortedFps[Math.floor(totalSamples*0.05)]||minFps;const p95F
ps=sortedFps[Math.floor(totalSamples*0.95)]||maxFps;const avgTemp=benchmark.results.temperatures.reduce((a,b)=>a+b,0)/totalSamples;const maxTemp=Math.max(...benchmark.results.temperatures);const avgGpuUsage=benchmark.results.gpuUsage.reduce((a,b)=>a+b,0)/totalSamples;const score=calculateAdvancedBenchmarkScore(avgFps,minFps,p1Fps,p5Fps,p95Fps,avgTemp,maxTemp,avgGpuUsage);const stability=(1-(maxFps-minFps)/avgFps)*100;const results=`Advanced Benchmark Complete!\nDuration: ${(elapsed/1000).toFixed(1)}s\nSamples: ${totalSamples}\nMode: ${benchmark.currentStress}\n\nFPS METRICS:\nAverage: ${avgFps.toFixed(1)}\nMinimum: ${minFps.toFixed(1)}\nMaximum: ${maxFps.toFixed(1)}\n1% Low: ${p1Fps.toFixed(1)}\n5% Low: ${p5Fps.toFixed(1)}\n95% High: ${p95Fps.toFixed(1)}\nStability: ${stability.toFixed(1)}%\n\nTHERMAL:\nAverage: ${avgTemp.toFixed(1)}°C\nMaximum: ${maxTemp.toFixed(1)}°C\n\nOVERALL SCORE: ${score}/100`;document.getElementById('benchResults').textContent=results;benchmark.lastResults={elapsed:elapsed,samples:totalSamples,avgFps:avgFps,minFps:minFps,maxFps:maxFps,p1Fps:p1Fps,p5Fps:p5Fps,p95Fps:p95Fps,avgTemp:avgTemp,maxTemp:maxTemp,avgGpuUsage:avgGpuUsage,score:score,stability:stability,timestamp:Date.now(),mode:benchmark.currentStress};generateAdvancedGamesPredictions();physics.active=false;}function calculateAdvancedBenchmarkScore(avgFps,minFps,p1Fps,p5Fps,p95Fps,avgTemp,maxTemp,avgGpuUsage){let score=0;score+=Math.min(40,avgFps/180*40);score+=Math.min(15,minFps/90*15);score+=Math.min(12,p1Fps/60*12);score+=Math.min(10,p5Fps/80*10);score+=Math.min(8,p95Fps/200*8);const stability=(1-Math.abs(p95Fps-p5Fps)/avgFps)*10;score+=Math.max(0,stability);if(maxTemp<75)score+=8;else if(maxTemp<85)score+=5;else if(maxTemp<95)score+=2;if(avgTemp<65)score+=7;else if(avgTemp<75)score+=4;else if(avgTemp<85)score+=1;return Math.round(Math.max(0,Math.min(100,score)));}function generateAdvancedGamesPredictions(){if(!benchmark.lastResults)return;const results=benchmark.lastResults;const profile=document.getElementById('perfProfile').va
lue;const resolution=document.getElementById('targetRes').value;const games=[{name:'Cyberpunk 2077',category:'AAA RPG',requirements:{mobile:{720:20,1080:15,1440:12,4000:8,8000:4},console:{720:35,1080:30,1440:25,4000:18,8000:10},pc:{720:60,1080:50,1440:40,4000:30,8000:18},enthusiast:{720:120,1080:100,1440:80,4000:60,8000:35},vr:{720:90,1080:90,1440:75,4000:60,8000:40},rtx:{720:144,1080:120,1440:100,4000:80,8000:50}},multipliers:{cpu:2.2,gpu:2.8,memory:2.0,rt:3.5}},{name:'Baldurs Gate 3',category:'RPG',requirements:{mobile:{720:25,1080:20,1440:16,4000:12,8000:6},console:{720:40,1080:35,1440:28,4000:20,8000:12},pc:{720:75,1080:60,1440:50,4000:38,8000:22},enthusiast:{720:144,1080:120,1440:100,4000:75,8000:45},vr:{720:90,1080:80,1440:70,4000:55,8000:35},rtx:{720:165,1080:144,1080:120,4000:90,8000:55}},multipliers:{cpu:1.9,gpu:2.3,memory:1.8,rt:2.8}},{name:'Starfield',category:'Space RPG',requirements:{mobile:{720:18,1080:15,1440:12,4000:8,8000:4},console:{720:30,1080:25,1440:20,4000:15,8000:8},pc:{720:55,1080:45,1440:35,4000:25,8000:15},enthusiast:{720:120,1080:90,1440:70,4000:50,8000:28},vr:{720:75,1080:65,1440:50,4000:38,8000:22},rtx:{720:144,1080:120,1440:90,4000:65,8000:38}},multipliers:{cpu:2.5,gpu:3.2,memory:2.3,rt:3.8}},{name:'Spider-Man 2',category:'Action',requirements:{mobile:{720:30,1080:25,1440:20,4000:15,8000:8},console:{720:50,1080:42,1440:35,4000:25,8000:15},pc:{720:85,1080:70,1440:58,4000:42,8000:25},enthusiast:{720:165,1080:144,1440:120,4000:90,8000:55},vr:{720:90,1080:85,1440:75,4000:60,8000:40},rtx:{720:200,1080:165,1440:144,4000:110,8000:70}},multipliers:{cpu:1.6,gpu:2.0,memory:1.5,rt:2.4}},{name:'Alan Wake 2',category:'Horror',requirements:{mobile:{720:15,1080:12,1440:10,4000:6,8000:3},console:{720:28,1080:24,1440:18,4000:12,8000:6},pc:{720:50,1080:40,1440:32,4000:22,8000:12},enthusiast:{720:100,1080:80,1440:65,4000:45,8000:25},vr:{720:75,1080:60,1440:48,4000:35,8000:20},rtx:{720:120,1080:100,1440:80,4000:55,8000:32}},multipliers:{cpu:2.4,gpu:3.0,memory:2.2,rt:3.6}},{name:'Counter-Strike 2',catego
ry:'Competitive FPS',requirements:{mobile:{720:60,1080:50,1440:42,4000:30,8000:18},console:{720:100,1080:85,1440:70,4000:50,8000:30},pc:{720:200,1080:165,1440:144,4000:100,8000:60},enthusiast:{720:400,1080:350,1440:300,4000:220,8000:140},vr:{720:144,1080:120,1440:100,4000:80,8000:50},rtx:{720:500,1080:400,1440:350,4000:280,8000:180}},multipliers:{cpu:1.3,gpu:1.6,memory:1.2,rt:1.4}},{name:'Valorant',category:'Tactical FPS',requirements:{mobile:{720:70,1080:60,1440:50,4000:35,8000:20},console:{720:120,1080:100,1440:85,4000:60,8000:35},pc:{720:240,1080:200,1440:165,4000:120,8000:75},enthusiast:{720:400,1080:350,1440:300,4000:240,8000:150},vr:{720:144,1080:120,1440:100,4000:85,8000:55},rtx:{720:480,1080:400,1440:350,4000:280,8000:180}},multipliers:{cpu:1.2,gpu:1.4,memory:1.1,rt:1.3}},{name:'Call of Duty MW3',category:'FPS',requirements:{mobile:{720:40,1080:35,1440:28,4000:20,8000:12},console:{720:70,1080:60,1440:48,4000:35,8000:20},pc:{720:120,1080:100,1440:85,4000:60,8000:38},enthusiast:{720:200,1080:165,1440:144,4000:110,8000:70},vr:{720:120,1080:100,1440:85,4000:70,8000:45},rtx:{720:240,1080:200,1440:165,4000:130,8000:85}},multipliers:{cpu:1.8,gpu:2.2,memory:1.6,rt:2.6}},{name:'Fortnite',category:'Battle Royale',requirements:{mobile:{720:50,1080:42,1440:35,4000:25,8000:15},console:{720:80,1080:70,1440:58,4000:42,8000:25},pc:{720:144,1080:120,1440:100,4000:75,8000:45},enthusiast:{720:240,1080:200,1440:165,4000:130,8000:80},vr:{720:120,1080:100,1440:90,4000:70,8000:45},rtx:{720:300,1080:240,1440:200,4000:150,8000:95}},multipliers:{cpu:1.4,gpu:1.8,memory:1.3,rt:2.1}},{name:'Apex Legends',category:'Battle Royale',requirements:{mobile:{720:45,1080:38,1440:30,4000:22,8000:12},console:{720:75,1080:65,1440:52,4000:38,8000:22},pc:{720:144,1080:120,1440:100,4000:75,8000:45},enthusiast:{720:240,1080:200,1440:165,4000:130,8000:80},vr:{720:144,1080:120,1440:100,4000:80,8000:50},rtx:{720:300,1080:240,1440:200,4000:155,8000:95}},multipliers:{cpu:1.5,gpu:1.9,memory:1.4,rt:2.3}},{name:'Hogwarts Legacy',category:'Adventure',require
ments:{mobile:{720:22,1080:18,1440:15,4000:10,8000:5},console:{720:38,1080:32,1440:25,4000:18,8000:10},pc:{720:65,1080:55,1440:42,4000:30,8000:18},enthusiast:{720:120,1080:100,1440:80,4000:58,8000:35},vr:{720:90,1080:75,1440:60,4000:45,8000:28},rtx:{720:144,1080:120,1440:95,4000:70,8000:42}},multipliers:{cpu:2.0,gpu:2.5,memory:1.8,rt:3.0}},{name:'Elden Ring',category:'Souls RPG',requirements:{mobile:{720:28,1080:24,1440:18,4000:12,8000:6},console:{720:45,1080:38,1440:30,4000:22,8000:12},pc:{720:75,1080:60,1440:48,4000:35,8000:20},enthusiast:{720:120,1080:100,1440:80,4000:60,8000:35},vr:{720:90,1080:75,1440:60,4000:45,8000:28},rtx:{720:144,1080:120,1440:95,4000:70,8000:45}},multipliers:{cpu:1.8,gpu:2.2,memory:1.6,rt:2.7}},{name:'Diablo IV',category:'ARPG',requirements:{mobile:{720:35,1080:30,1440:24,4000:18,8000:10},console:{720:60,1080:50,1440:40,4000:28,8000:16},pc:{720:100,1080:85,1440:70,4000:50,8000:30},enthusiast:{720:165,1080:144,1440:120,4000:85,8000:52},vr:{720:120,1080:100,1440:85,4000:65,8000:40},rtx:{720:200,1080:165,1440:144,4000:110,8000:70}},multipliers:{cpu:1.5,gpu:1.8,memory:1.4,rt:2.2}},{name:'Street Fighter 6',category:'Fighting',requirements:{mobile:{720:55,1080:48,1440:40,4000:30,8000:18},console:{720:90,1080:75,1440:60,4000:45,8000:28},pc:{720:144,1080:120,1440:100,4000:75,8000:45},enthusiast:{720:240,1080:200,1440:165,4000:130,8000:80},vr:{720:144,1080:120,1440:100,4000:80,8000:50},rtx:{720:300,1080:240,1440:200,4000:155,8000:95}},multipliers:{cpu:1.2,gpu:1.5,memory:1.1,rt:1.6}},{name:'Resident Evil 4',category:'Survival Horror',requirements:{mobile:{720:32,1080:28,1440:22,4000:16,8000:8},console:{720:55,1080:45,1440:38,4000:28,8000:16},pc:{720:90,1080:75,1440:60,4000:45,8000:28},enthusiast:{720:144,1080:120,1440:100,4000:75,8000:45},vr:{720:120,1080:100,1440:85,4000:65,8000:40},rtx:{720:165,1080:144,1440:120,4000:90,8000:55}},multipliers:{cpu:1.7,gpu:2.1,memory:1.5,rt:2.5}}];const resolutionMap={'720p':720,'1080p':1080,'1440p':1440,'4k':4000,'8k':8000,'16k':16000};const targetRes=resolution
Map[resolution]||1080;let html='';const categories={};games.forEach(game=>{if(!categories[game.category])categories[game.category]=[];categories[game.category].push(game);});Object.keys(categories).forEach(category=>{html+=`<div class="game-category">${category}</div>`;categories[category].forEach(game=>{const requirement=game.requirements[profile]?game.requirements[profile][targetRes]||game.requirements[profile][1080]:45;const rtMultiplier=profile==='rtx'?game.multipliers.rt:game.multipliers.gpu;const adjustedFps=results.p5Fps/rtMultiplier;let performance='Unplayable';let className='unplayable';if(adjustedFps>=requirement*2.0){performance='Ultra';className='ultra';}else if(adjustedFps>=requirement*1.6){performance='High';className='high';}else if(adjustedFps>=requirement*1.2){performance='Medium';className='medium';}else if(adjustedFps>=requirement*0.8){performance='Low';className='low';}html+=`<div class="game-item ${className}"><span>${game.name}</span><span class="chip">${performance}</span></div>`;});});document.getElementById('gamesList').innerHTML=html;}



function initInputHandling(){document.addEventListener('keydown',handleKeyDown);document.addEventListener('keyup',handleKeyUp);document.addEventListener('mousemove',handleMouseMove);document.addEventListener('click',handleMouseClick);canvas.addEventListener('click',()=>{if(!mouse.locked){canvas.requestPointerLock();}});document.addEventListener('pointerlockchange',()=>{mouse.locked=document.pointerLockElement===canvas;document.getElementById('crosshair').style.display=mouse.locked?'block':'none';});window.addEventListener('wheel',handleWheel);}function handleKeyDown(e){keys[e.code]=true;if(e.code==='Escape'&&mouse.locked){document.exitPointerLock();}else if(e.code==='KeyF'&&mouse.locked){toggleFly();}else if(e.code==='KeyG'){addExplosion();}else if(e.code==='KeyT'){toggleSlingshot();}else if(e.code==='KeyM'){toggleMinimap();}else if(e.code==='KeyP'){togglePhysicsViz();}else if(e.code==='KeyB'&&mouse.locked){startBenchmark();}else if(e.code==='KeyN'&&mouse.locked){stopBenchmark();}else if(e.code==='KeyH'&&mouse.locked){generateWorld();}}function handleKeyUp(e){keys[e.code]=false;}function handleMouseMove(e){if(!mouse.locked)return;const sensitivity=0.0025;camera.yaw+=e.movementX*sensitivity;camera.pitch-=e.movementY*sensitivity;camera.pitch=Math.max(-Math.PI/2,Math.min(Math.PI/2,camera.pitch));}function handleMouseClick(e){if(!mouse.locked)return;if(e.button===0){simulateShot();}else if(e.button===2){addExplosion();}}function handleWheel(e){if(!mouse.locked)return;e.preventDefault();const speed=parseFloat(document.getElementById('moveSpeed').value);const newSpeed=Math.max(1,Math.min(50,speed+(e.deltaY>0?-1:1)));document.getElementById('moveSpeed').value=newSpeed;document.getElementById('speedLabel').textContent=newSpeed;}function updateCamera(deltaTime){if(!mouse.locked)return;const speed=parseFloat(document.getElementById('moveSpeed').value)*deltaTime*0.015;const forward=[Math.sin(camera.yaw)*Math.cos(camera.pitch),Math.sin(camera.pitch),Math.cos(camera.yaw)*Math.cos(camera.pitch)];const right=normalize(cross(for
ward,[0,1,0]));const up=normalize(cross(right,forward));if(keys['KeyW']||keys['ArrowUp']){camera.x+=forward[0]*speed;camera.y+=forward[1]*speed;camera.z+=forward[2]*speed;}if(keys['KeyS']||keys['ArrowDown']){camera.x-=forward[0]*speed;camera.y-=forward[1]*speed;camera.z-=forward[2]*speed;}if(keys['KeyA']||keys['ArrowLeft']){camera.x-=right[0]*speed;camera.y-=right[1]*speed;camera.z-=right[2]*speed;}if(keys['KeyD']||keys['ArrowRight']){camera.x+=right[0]*speed;camera.y+=right[1]*speed;camera.z+=right[2]*speed;}if(keys['Space']){camera.y+=speed*1.5;}if(keys['ShiftLeft']){camera.y-=speed*1.5;}if(keys['KeyQ']){camera.z+=speed;}if(keys['KeyE']){camera.z-=speed;}const terrainHeight=getTerrainHeight(camera.x,camera.z);if(!state.flyMode&&camera.y<terrainHeight+3){camera.y=terrainHeight+3;}}function switchTab(tabName){document.querySelectorAll('.tab-content').forEach(content=>content.style.display='none');document.querySelectorAll('#tabs button').forEach(btn=>btn.classList.remove('active'));document.getElementById(tabName).style.display='block';document.querySelector(`#tabs button[onclick="switchTab('${tabName}')"]`).classList.add('active');}function updateUILabels(){document.getElementById('seedLabel').textContent=document.getElementById('worldSeed').value;document.getElementById('renderLabel').textContent=document.getElementById('renderDist').value;document.getElementById('detailLabel').textContent=document.getElementById('chunkDetail').value;document.getElementById('biomeLabel').textContent=document.getElementById('biomeComp').value;document.getElementById('waterLabel').textContent=document.getElementById('waterLevel').value;document.getElementById('speedLabel').textContent=document.getElementById('moveSpeed').value;document.getElementById('gravLabel').textContent=document.getElementById('gravity').value;document.getElementById('airLabel').textContent=document.getElementById('airRes').value;document.getElementById('bounceLabel').textContent=document.getElementById('bounceFactor').value;document.getElementById('partLabe
l').textContent=document.getElementById('partCount').value;}function setupUIEventListeners(){const sliders=['worldSeed','renderDist','chunkDetail','biomeComp','waterLevel','moveSpeed','gravity','airRes','bounceFactor','partCount'];sliders.forEach(id=>{const slider=document.getElementById(id);if(slider){slider.addEventListener('input',()=>{updateUILabels();if(id==='gravity')physics.gravity=parseFloat(slider.value);if(id==='airRes')physics.airResistance=parseFloat(slider.value);if(id==='bounceFactor')physics.bounceFactor=parseFloat(slider.value);});}});document.getElementById('physicsEngine').addEventListener('change',e=>{physics.engine=e.target.value;});document.getElementById('thermalWarning').addEventListener('change',e=>{if(e.target.checked){alert('WARNING: Extreme benchmarks may cause significant thermal stress and potential hardware damage. Monitor temperatures carefully and stop immediately if temps exceed 95°C.');}});document.getElementById('autoSave').addEventListener('change',e=>{benchmark.autoSave=e.target.checked;});}function toggleFly(){state.flyMode=!state.flyMode;}function resetCamera(){camera.x=0;camera.y=80;camera.z=0;camera.pitch=0;camera.yaw=0;}function toggleSlingshot(){const slingshot=document.getElementById('slingshot');const isVisible=slingshot.style.display!=='none';slingshot.style.display=isVisible?'none':'block';math.slingshot.active=!isVisible;}function togglePhysicsViz(){const viz=document.getElementById('physicsViz');viz.style.display=viz.style.display==='none'?'block':'none';if(viz.style.display==='block'){updatePhysicsViz();}}function toggleMinimap(){const minimap=document.getElementById('minimap');minimap.style.display=minimap.style.display==='none'?'block':'none';}function startPhysics(){physics.active=true;initPhysicsEngine();document.getElementById('physicsLog').textContent='Advanced Physics Engine: Running\nIntegrator: '+physics.engine+'\nParticles: '+physics.particles.length;}function resetPhysics(){initPhysicsEngine();document.getElementById('physicsLog').textContent='Advanced 
Physics Engine: Reset\nParticles: '+physics.particles.length;}function updatePhysicsViz(){if(!physics.active)return;const activeParticles=physics.particles.filter(p=>p.active).length;const avgVelocity=physics.particles.reduce((sum,p)=>sum+Math.sqrt(p.velocity[0]*p.velocity[0]+p.velocity[1]*p.velocity[1]+p.velocity[2]*p.velocity[2]),0)/physics.particles.length;const explosions=physics.explosions.length;document.getElementById('physicsData').innerHTML=`Active: ${activeParticles}/${physics.particles.length}<br>Avg Velocity: ${avgVelocity.toFixed(1)} m/s<br>Explosions: ${explosions}<br>Gravity: ${physics.gravity.toFixed(1)}<br>Air Resistance: ${physics.airResistance.toFixed(3)}<br>Bounce Factor: ${physics.bounceFactor.toFixed(2)}`;}


function calculateTrajectory(){const vel=parseFloat(document.getElementById('slingshotVel').value);const angle=parseFloat(document.getElementById('slingshotAngle').value)*Math.PI/180;const wind=parseFloat(document.getElementById('windSpeed').value);const target=parseFloat(document.getElementById('targetDist').value);const g=Math.abs(physics.gravity);const vx=vel*Math.cos(angle);const vy=vel*Math.sin(angle);math.trajectory=[];const dt=0.05;let t=0;let x=0,y=0;while(y>=0&&t<25){x=vx*t+0.5*wind*t*t;y=vy*t-0.5*g*t*t;math.trajectory.push({x:x,y:y,t:t,vx:vx+wind*t,vy:vy-g*t});t+=dt;}const range=math.trajectory.length>0?math.trajectory[math.trajectory.length-1].x:0;const maxHeight=math.trajectory.length>0?Math.max(...math.trajectory.map(p=>p.y)):0;const flightTime=math.trajectory.length>0?math.trajectory[math.trajectory.length-1].t:0;const impactVelocity=math.trajectory.length>0?Math.sqrt(Math.pow(math.trajectory[math.trajectory.length-1].vx,2)+Math.pow(math.trajectory[math.trajectory.length-1].vy,2)):0;const kineticEnergy=0.5*2*Math.pow(vel,2);const potentialEnergy=2*g*maxHeight;document.getElementById('mathResults').textContent=`Advanced Ballistics Analysis:\nRange: ${range.toFixed(2)}m\nMax Height: ${maxHeight.toFixed(2)}m\nFlight Time: ${flightTime.toFixed(2)}s\nImpact Velocity: ${impactVelocity.toFixed(2)}m/s\nKinetic Energy: ${kineticEnergy.toFixed(1)}J\nPotential Energy: ${potentialEnergy.toFixed(1)}J\nTarget Error: ${Math.abs(range-target).toFixed(2)}m\nTrajectory Points: ${math.trajectory.length}`;drawAdvancedTrajectoryGraph();}function drawAdvancedTrajectoryGraph(){const canvas=document.getElementById('trajectoryCanvas');const ctx=canvas.getContext('2d');ctx.clearRect(0,0,canvas.width,canvas.height);if(!math.trajectory||math.trajectory.length<2)return;const maxX=Math.max(...math.trajectory.map(p=>p.x),parseFloat(document.getElementById('targetDist').value));const maxY=Math.max(...math.trajectory.map(p=>p.y));const scaleX=(canvas.width-40)/maxX;const scaleY=(canvas.height-40)/maxY;ctx.strokeStyle='#00d4ff';ctx.
lineWidth=3;ctx.beginPath();for(let i=0;i<math.trajectory.length;i++){const point=math.trajectory[i];const x=point.x*scaleX+20;const y=canvas.height-point.y*scaleY-20;if(i===0)ctx.moveTo(x,y);else ctx.lineTo(x,y);}ctx.stroke();ctx.fillStyle='#20ff20';ctx.beginPath();ctx.arc(20,canvas.height-20,4,0,2*Math.PI);ctx.fill();const target=parseFloat(document.getElementById('targetDist').value);if(target<=maxX){const targetX=target*scaleX+20;ctx.strokeStyle='#ff4040';ctx.setLineDash([8,8]);ctx.lineWidth=2;ctx.beginPath();ctx.moveTo(targetX,canvas.height-20);ctx.lineTo(targetX,20);ctx.stroke();ctx.setLineDash([]);}}function optimizeAngle(){const vel=parseFloat(document.getElementById('slingshotVel').value);const targetDist=parseFloat(document.getElementById('targetDist').value);const wind=parseFloat(document.getElementById('windSpeed').value);const g=Math.abs(physics.gravity);let bestAngle=45;let minError=Infinity;for(let angle=1;angle<89;angle+=0.2){const rad=angle*Math.PI/180;const vx=vel*Math.cos(rad);const vy=vel*Math.sin(rad);const discriminant=(vy*vy)+(2*g*0);if(discriminant<0)continue;const t1=(-vy+Math.sqrt(discriminant))/(-g);const t2=(-vy-Math.sqrt(discriminant))/(-g);const flightTime=Math.max(t1,t2);const range=vx*flightTime+0.5*wind*flightTime*flightTime;const error=Math.abs(range-targetDist);if(error<minError){minError=error;bestAngle=angle;}}document.getElementById('slingshotAngle').value=bestAngle.toFixed(1);calculateTrajectory();}function simulateShot(){if(math.slingshot.projectile)return;const vel=parseFloat(document.getElementById('slingshotVel').value);const angle=parseFloat(document.getElementById('slingshotAngle').value)*Math.PI/180;const wind=parseFloat(document.getElementById('windSpeed').value);math.slingshot.projectile={position:[camera.x,camera.y,camera.z],velocity:[vel*Math.cos(angle),vel*Math.sin(angle),0],life:15,trail:[]};math.slingshot.wind=[wind,0,0];}function calculateOrbital(){const mass1=5.972e24;const mass2=7.342e22;const radius=3.844e8;const G=6.67430e-11;const orbitalVelocity=Math.sqr
t(G*mass1/radius);const orbitalPeriod=2*Math.PI*Math.sqrt(Math.pow(radius,3)/(G*mass1));const escapeVelocity=Math.sqrt(2*G*mass1/6.371e6);document.getElementById('mathResults').textContent=`Orbital Mechanics (Earth-Moon):\nOrbital Velocity: ${(orbitalVelocity/1000).toFixed(2)} km/s\nOrbital Period: ${(orbitalPeriod/86400).toFixed(1)} days\nEscape Velocity (Earth): ${(escapeVelocity/1000).toFixed(2)} km/s\nGravitational Force: ${(G*mass1*mass2/Math.pow(radius,2)).toFixed(2)} N\nTidal Force Factor: ${(2*G*mass2*6.371e6/Math.pow(radius,3)).toFixed(2)} m/s²`;}function getSystemInfo(){const info={gpu:'Detecting...',webgl:'Unknown',memory:'Unknown',cores:navigator.hardwareConcurrency||0,screen:`${screen.width}x${screen.height}`,devicePixelRatio:window.devicePixelRatio||1,platform:navigator.platform||'Unknown',userAgent:navigator.userAgent||'Unknown',language:navigator.language||'Unknown',vendor:navigator.vendor||'Unknown'};if(gl){try{const debugInfo=gl.getExtension('WEBGL_debug_renderer_info');if(debugInfo){info.gpu=gl.getParameter(debugInfo.UNMASKED_RENDERER_WEBGL)||'Unknown GPU';info.gpuVendor=gl.getParameter(debugInfo.UNMASKED_VENDOR_WEBGL)||'Unknown';}info.webgl=gl.getParameter(gl.VERSION)||'Unknown';info.webglVendor=gl.getParameter(gl.VENDOR)||'Unknown';info.webglRenderer=gl.getParameter(gl.RENDERER)||'Unknown';info.shadingLanguage=gl.getParameter(gl.SHADING_LANGUAGE_VERSION)||'Unknown';const extensions=gl.getSupportedExtensions();info.webglExtensions=extensions?extensions.length:0;}catch(e){}}if(performance&&performance.memory){info.jsHeapSizeLimit=Math.round(performance.memory.jsHeapSizeLimit/1048576);info.totalJSHeapSize=Math.round(performance.memory.totalJSHeapSize/1048576);info.usedJSHeapSize=Math.round(performance.memory.usedJSHeapSize/1048576);info.memory=`${info.usedJSHeapSize}/${info.totalJSHeapSize}MB`;}if(navigator.connection){const conn=navigator.connection;info.connectionType=conn.effectiveType||conn.type||'Unknown';info.downlink=conn.downlink||'Unknown';info.rtt=conn.rtt||'Unknown';}return info;}func
tion updateSystemDisplay(){const info=getSystemInfo();document.getElementById('gpuInfo').textContent=info.gpu.length>25?info.gpu.substring(0,25)+'...':info.gpu;document.getElementById('ramInfo').textContent=info.memory;document.getElementById('cpuInfo').textContent=info.cores.toString();document.getElementById('webglInfo').textContent=info.webgl.includes('WebGL')?info.webgl.split(' ')[1]||'2.0':'Unknown';}function runDiagnostics(){const startTime=performance.now();const info=getSystemInfo();let diagnostics='=== ADVANCED GPU DIAGNOSTICS ===\n';diagnostics+=`GPU: ${info.gpu}\nVendor: ${info.gpuVendor||'Unknown'}\nWebGL: ${info.webgl}\nGLSL: ${info.shadingLanguage}\nExtensions: ${info.webglExtensions}\n\n`;diagnostics+='=== PERFORMANCE TESTS ===\n';const glTests=[{name:'Clear Performance',test:()=>{const start=performance.now();for(let i=0;i<1500;i++){gl.clearColor(Math.random(),Math.random(),Math.random(),1);gl.clear(gl.COLOR_BUFFER_BIT);}return performance.now()-start;}},{name:'Buffer Operations',test:()=>{const start=performance.now();const buffer=gl.createBuffer();const data=new Float32Array(8000);for(let i=0;i<150;i++){gl.bindBuffer(gl.ARRAY_BUFFER,buffer);gl.bufferData(gl.ARRAY_BUFFER,data,gl.DYNAMIC_DRAW);}gl.deleteBuffer(buffer);return performance.now()-start;}},{name:'Texture Operations',test:()=>{const start=performance.now();for(let i=0;i<120;i++){const texture=gl.createTexture();gl.bindTexture(gl.TEXTURE_2D,texture);gl.texImage2D(gl.TEXTURE_2D,0,gl.RGBA,256,256,0,gl.RGBA,gl.UNSIGNED_BYTE,null);gl.deleteTexture(texture);}return performance.now()-start;}},{name:'Shader Compilation',test:()=>{const start=performance.now();for(let i=0;i<10;i++){const vs=createShader(gl.VERTEX_SHADER,VERTEX_SHADERS.world);const fs=createShader(gl.FRAGMENT_SHADER,FRAGMENT_SHADERS.world);if(vs)gl.deleteShader(vs);if(fs)gl.deleteShader(fs);}return performance.now()-start;}}];for(const test of glTests){try{const time=test.test();diagnostics+=`${test.name}: ${time.toFixed(2)}ms\n`;}catch(e){diagnostics+=`${test.name}: ERROR - ${e.
message}\n`;}}diagnostics+='\n=== MEMORY ANALYSIS ===\n';if(performance.memory){diagnostics+=`JS Heap Limit: ${info.jsHeapSizeLimit}MB\nJS Heap Used: ${info.usedJSHeapSize}MB\nJS Heap Total: ${info.totalJSHeapSize}MB\nMemory Pressure: ${((info.usedJSHeapSize/info.jsHeapSizeLimit)*100).toFixed(1)}%\n`;}diagnostics+='\n=== CAPABILITIES ===\n';try{const maxTextureSize=gl.getParameter(gl.MAX_TEXTURE_SIZE);diagnostics+=`Max Texture: ${maxTextureSize}x${maxTextureSize}\n`;const maxRenderbufferSize=gl.getParameter(gl.MAX_RENDERBUFFER_SIZE);diagnostics+=`Max Renderbuffer: ${maxRenderbufferSize}\n`;const maxVertexAttribs=gl.getParameter(gl.MAX_VERTEX_ATTRIBS);diagnostics+=`Max Vertex Attributes: ${maxVertexAttribs}\n`;const maxFragmentUniforms=gl.getParameter(gl.MAX_FRAGMENT_UNIFORM_VECTORS);diagnostics+=`Max Fragment Uniforms: ${maxFragmentUniforms}\n`;}catch(e){diagnostics+='Error reading capabilities\n';}const endTime=performance.now();diagnostics+=`\n=== SYSTEM SUMMARY ===\nDiagnostic Time: ${(endTime-startTime).toFixed(2)}ms\nOverall Status: OPTIMAL\nBenchmark Ready: YES\n`;document.getElementById('diagnosticsLog').textContent=diagnostics;}function getEstimatedTemperature(){const baseTemp=42;const fpsLoad=fpsHistory.length>0?Math.max(0,fpsHistory[fpsHistory.length-1]):0;const loadFactor=Math.min(1,fpsLoad/180);const memoryPressure=performance.memory?performance.memory.usedJSHeapSize/performance.memory.jsHeapSizeLimit:0.6;const complexityFactor=(parseFloat(document.getElementById('chunkDetail').value)||12)/24;const particleLoad=(parseFloat(document.getElementById('partCount').value)||5000)/25000;const benchmarkHeat=benchmark.active?15:0;const estimatedTemp=baseTemp+(loadFactor*35)+(memoryPressure*20)+(complexityFactor*15)+(particleLoad*25)+benchmarkHeat;return Math.round(Math.min(105,Math.max(25,estimatedTemp)));}function exportSystemData(){const info=getSystemInfo();const exportData={timestamp:new Date().toISOString(),systemInfo:info,benchmarkResults:benchmark.lastResults||null,performanceHistory:{fps:fpsHistory.slic
e(-200),temperatures:temperatures.slice(-200)},webglCapabilities:{},worldData:{seed:world.seed,chunks:world.chunks.length,renderDistance:world.renderDistance},physicsData:{engine:physics.engine,particles:physics.particles.length,active:physics.active}};if(gl){const caps=['MAX_TEXTURE_SIZE','MAX_RENDERBUFFER_SIZE','MAX_VERTEX_ATTRIBS','MAX_FRAGMENT_UNIFORM_VECTORS','MAX_VERTEX_UNIFORM_VECTORS','MAX_COMBINED_TEXTURE_IMAGE_UNITS'];caps.forEach(cap=>{try{exportData.webglCapabilities[cap]=gl.getParameter(gl[cap]);}catch(e){exportData.webglCapabilities[cap]='ERROR';}});}const blob=new Blob([JSON.stringify(exportData,null,2)],{type:'application/json'});const url=URL.createObjectURL(blob);const a=document.createElement('a');a.href=url;a.download=`neonforge-system-${Date.now()}.json`;document.body.appendChild(a);a.click();document.body.removeChild(a);URL.revokeObjectURL(url);}function render(){const now=performance.now();const deltaTime=now-startTime;frameCount++;if(now-state.lastFpsUpdate>1000){const fps=frameCount/(now-state.lastFpsUpdate)*1000;fpsHistory.push(fps);if(fpsHistory.length>200)fpsHistory.shift();temperatures.push(getEstimatedTemperature());if(temperatures.length>200)temperatures.shift();updateFooter(fps);frameCount=0;state.lastFpsUpdate=now;if(physics.active){updatePhysicsViz();}}gl.clearColor(0.02,0.05,0.12,1);gl.clear(gl.COLOR_BUFFER_BIT|gl.DEPTH_BUFFER_BIT);gl.enable(gl.DEPTH_TEST);gl.enable(gl.BLEND);gl.blendFunc(gl.SRC_ALPHA,gl.ONE_MINUS_SRC_ALPHA);updateCamera(deltaTime);updateWorldChunks();if(physics.active){updatePhysics(deltaTime);}renderWorld(deltaTime);if(physics.active&&physics.particles.length>0){renderParticles(deltaTime);}if(benchmark.active){updateBenchmark(deltaTime);}requestAnimationFrame(render);}function renderWorld(deltaTime){if(!programs.world||!world.chunks)return;gl.useProgram(programs.world);const projectionMatrix=mat4Perspective(Math.PI/3.5,canvas.width/canvas.height,0.1,2000);const viewMatrix=mat4LookAt([camera.x,camera.y,camera.z],[camera.x+Math.sin(camera.yaw)*Math.cos(camera.pi
tch),camera.y+Math.sin(camera.pitch),camera.z+Math.cos(camera.yaw)*Math.cos(camera.pitch)],[0,1,0]);const modelMatrix=mat4Identity();const mvpMatrix=mat4Multiply(mat4Multiply(projectionMatrix,viewMatrix),modelMatrix);gl.uniformMatrix4fv(programs.world.uniformLoc.mvp,false,mvpMatrix);gl.uniformMatrix4fv(programs.world.uniformLoc.model,false,modelMatrix);gl.uniform1f(programs.world.uniformLoc.time,deltaTime);gl.uniform3f(programs.world.uniformLoc.cameraPos,camera.x,camera.y,camera.z);gl.uniform3f(programs.world.uniformLoc.lightDir,0.4,-0.6,0.3);for(const chunk of world.chunks){if(!chunk.buffer||chunk.vertexCount===0)continue;const chunkDistance=distance([camera.x,camera.y,camera.z],[(chunk.x+0.5)*16,48,(chunk.z+0.5)*16]);if(chunkDistance>world.renderDistance*24)continue;gl.bindBuffer(gl.ARRAY_BUFFER,chunk.buffer);gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,chunk.indexBuffer);const stride=8*4;gl.vertexAttribPointer(programs.world.attribLoc.position,3,gl.FLOAT,false,stride,0);gl.enableVertexAttribArray(programs.world.attribLoc.position);gl.vertexAttribPointer(programs.world.attribLoc.texCoord,2,gl.FLOAT,false,stride,3*4);gl.enableVertexAttribArray(programs.world.attribLoc.texCoord);gl.vertexAttribPointer(programs.world.attribLoc.normal,3,gl.FLOAT,false,stride,5*4);gl.enableVertexAttribArray(programs.world.attribLoc.normal);if(programs.world.attribLoc.blockType>=0){gl.vertexAttribPointer(programs.world.attribLoc.blockType,1,gl.FLOAT,false,stride,7*4);gl.enableVertexAttribArray(programs.world.attribLoc.blockType);}gl.drawElements(gl.TRIANGLES,chunk.vertexCount,gl.UNSIGNED_SHORT,0);}}function renderParticles(deltaTime){if(!programs.particle||!physics.particles.length)return;gl.useProgram(programs.particle);const projectionMatrix=mat4Perspective(Math.PI/3.5,canvas.width/canvas.height,0.1,2000);const viewMatrix=mat4LookAt([camera.x,camera.y,camera.z],[camera.x+Math.sin(camera.yaw)*Math.cos(camera.pitch),camera.y+Math.sin(camera.pitch),camera.z+Math.cos(camera.yaw)*Math.cos(camera.pitch)],[0,1,0]);const mvpMatrix=mat4Multiply(pr
ojectionMatrix,viewMatrix);gl.uniformMatrix4fv(programs.particle.uniformLoc.mvp,false,mvpMatrix);gl.uniform1f(programs.particle.uniformLoc.time,deltaTime);gl.uniform1f(programs.particle.uniformLoc.pointSize,3.5);const particleData=new Float32Array(physics.particles.length*7);let index=0;for(const particle of physics.particles){if(!particle.active)continue;particleData[index++]=particle.position[0];particleData[index++]=particle.position[1];particleData[index++]=particle.position[2];particleData[index++]=particle.velocity[0]*0.08;particleData[index++]=particle.velocity[1]*0.08;particleData[index++]=particle.velocity[2]*0.08;particleData[index++]=1-particle.life;}if(index===0)return;if(!buffers.particles){buffers.particles=gl.createBuffer();}gl.bindBuffer(gl.ARRAY_BUFFER,buffers.particles);gl.bufferData(gl.ARRAY_BUFFER,particleData,gl.DYNAMIC_DRAW);gl.vertexAttribPointer(programs.particle.attribLoc.position,3,gl.FLOAT,false,7*4,0);gl.enableVertexAttribArray(programs.particle.attribLoc.position);gl.vertexAttribPointer(programs.particle.attribLoc.velocity,3,gl.FLOAT,false,7*4,3*4);gl.enableVertexAttribArray(programs.particle.attribLoc.velocity);gl.vertexAttribPointer(programs.particle.attribLoc.life,1,gl.FLOAT,false,7*4,6*4);gl.enableVertexAttribArray(programs.particle.attribLoc.life);gl.drawArrays(gl.POINTS,0,index/7);}function updateFooter(fps){const temp=getEstimatedTemperature();const ram=performance.memory?Math.round(performance.memory.usedJSHeapSize/1048576):0;const gpu=gl.getParameter(gl.getExtension('WEBGL_debug_renderer_info')?gl.getExtension('WEBGL_debug_renderer_info').UNMASKED_RENDERER_WEBGL:gl.RENDERER)||'Unknown';document.getElementById('footer').textContent=`FPS: ${fps.toFixed(1)} | GPU: ${gpu.split(' ')[0]||'Unknown'} | RAM: ${ram}MB | Temp: ${temp}°C`;}function analyzeGames(){if(!benchmark.lastResults){alert('Run an advanced benchmark first to analyze 2024 game performance');return;}generateAdvancedGamesPredictions();}function exportGameData(){if(!benchmark.lastResults){alert('No advanced benchmark d
ata available');return;}const gameData={benchmarkResults:benchmark.lastResults,predictions:document.getElementById('gamesList').innerHTML,profile:document.getElementById('perfProfile').value,resolution:document.getElementById('targetRes').value,timestamp:Date.now()};const blob=new Blob([JSON.stringify(gameData,null,2)],{type:'application/json'});const url=URL.createObjectURL(blob);const a=document.createElement('a');a.href=url;a.download=`neonforge-games-${Date.now()}.json`;document.body.appendChild(a);a.click();document.body.removeChild(a);URL.revokeObjectURL(url);}function exportWorld(){if(!world.chunks||world.chunks.length===0){alert('No world data to export');return;}const exportData={seed:world.seed,renderDistance:world.renderDistance,chunks:world.chunks.map(chunk=>({x:chunk.x,z:chunk.z,vertexCount:chunk.vertexCount})),totalBlocks:world.chunks.length*16*16*48,timestamp:Date.now(),cameraPosition:{x:camera.x,y:camera.y,z:camera.z}};const blob=new Blob([JSON.stringify(exportData,null,2)],{type:'application/json'});const url=URL.createObjectURL(blob);const a=document.createElement('a');a.href=url;a.download=`neonforge-world-${world.seed}-${Date.now()}.json`;document.body.appendChild(a);a.click();document.body.removeChild(a);URL.revokeObjectURL(url);}function saveBenchmark(){if(!benchmark.lastResults){alert('No benchmark results to save');return;}const blob=new Blob([JSON.stringify(benchmark.lastResults,null,2)],{type:'application/json'});const url=URL.createObjectURL(blob);const a=document.createElement('a');a.href=url;a.download=`neonforge-benchmark-${Date.now()}.json`;document.body.appendChild(a);a.click();document.body.removeChild(a);URL.revokeObjectURL(url);}function compareBenchmarks(){alert('Advanced benchmark comparison - Upload previous results to compare performance trends and hardware optimization recommendations.');}function saveBenchmarkData(){if(benchmark.lastResults){localStorage.setItem('neonforge-benchmark',JSON.stringify(benchmark.lastResults));}}function initializeEngine(){initShaders();initPhy
sicsEngine();world.seed=12345;world.renderDistance=24;world.chunks=[];updateUILabels();setupUIEventListeners();initInputHandling();updateSystemDisplay();state.lastFpsUpdate=performance.now();setTimeout(()=>{generateWorld();render();},100);}window.addEventListener('load',initializeEngine);













</script>

</body></html>